{% extends 'base.html.twig' %}

{% block title %}Ajouter{% endblock %}

{% block stylesheets_custom %}
    <link rel="stylesheet" href="{{ asset('css/form.css') }}">
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('css/media.css') }}">
{% endblock %}

{% block right %}
    <h1>Accueil</h1>
    <div class="jumbotron">
        <h4 class="display-6">Ajouter</h4>
        <p></p>
        <hr class="my-3">
        <div class="col">
            <div class="row">
                {% include('partials/formuser.html.twig') %}
            </div>
        </div>
    </div>
{% endblock %}

{% block extrajs %}
    <script type="text/javascript" src="{{ asset('js/common.js') }}"></script>
    <script type="text/javascript">
        let name_f = document.getElementById("folio_name");
        let link_f = document.getElementById("folio_link");
        let image_f = document.getElementById("folio_icon");

        let name_p = document.getElementById("name");
        let link_p = document.getElementById("link");
        let image_p = document.getElementById("image_preview");


        name_f.addEventListener("input", (event) => {
            const inputValue = event.target.value;
            if (inputValue != undefined) {
                name_p.innerText = "Nom du projet : " + inputValue;
            }
        })
        link_f.addEventListener("input", (event) => {
            const inputValue = event.target.value;
            if (inputValue != undefined) {
                link_p.innerText = "Lien : " + inputValue;
            }
        })
        image_f.addEventListener('change', function (event) {
                const selectedFile = event.target.files[0];
                if (selectedFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        image_p.src = e.target.result;
                        //folio[2].value=selectedFile.name;
                    };
                    reader.onerror = (e) => {
                        image_p.src = "/images/noimage.jpg";
                    };
                    reader.readAsDataURL(selectedFile);
                }
            }
        );

    </script>
{% endblock %}